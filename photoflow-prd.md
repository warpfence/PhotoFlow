# NAS PhotoFlow - PRD (Product Requirements Document)

## 프로젝트 개요

**버전:** 1.0 (1차 개발)  
**타겟 플랫폼:** Windows, macOS (데스크톱 전용)  
**향후 계획:** Android 지원 (WebDAV 방식 검토 예정)

---

## /speckit.specify 프롬프트

아래 내용을 `/speckit.specify` 명령어와 함께 사용하세요:

---

```
/speckit.specify

NAS 포토 슬라이드쇼 앱을 개발합니다.

## 앱 개요
Synology NAS에 저장된 사진들을 자동으로 슬라이드쇼로 보여주는 데스크톱 앱입니다.
Windows와 macOS에서 동작하며, SMB로 마운트된 NAS 폴더 또는 로컬 폴더의 사진들을
설정된 간격으로 자동 전환하며 감상할 수 있습니다.

## 핵심 기능 요구사항

### 1. 폴더 선택 및 이미지 로드
- 사용자가 로컬 폴더 또는 NAS 마운트 폴더를 선택할 수 있어야 합니다
- Windows: 마운트된 네트워크 드라이브 경로 지원 (예: Z:\Photos)
- macOS: 마운트된 볼륨 경로 지원 (예: /Volumes/NAS/Photos)
- 지원 이미지 포맷: JPG, JPEG, PNG, GIF, WEBP
- **하위 폴더 포함 (기본값 ON):** 선택한 폴더 아래의 모든 하위 폴더를 재귀적으로 탐색하여 이미지 수집
  - 예: Z:\Photos 선택 시 → Z:\Photos\2023, Z:\Photos\2024\여행, Z:\Photos\가족 등 모든 하위 폴더의 이미지 포함
  - 설정에서 ON/OFF 토글 가능 (OFF 시 선택한 폴더의 직접 하위 이미지만 로드)
- 이미지 목록을 메모리에 캐싱하여 빠른 로드
- 스캔 진행 상황 표시 (대용량 폴더의 경우 "스캔 중... 1,234장 발견")

### 2. 슬라이드쇼 재생
- 전체화면 모드에서 사진 표시
- 자동 전환 간격 설정: 3초, 5초, 10초, 15초, 30초, 1분 중 선택
- 재생 순서: 순차 재생 또는 랜덤 재생 선택 가능
- 일시정지/재생 토글 기능
- 수동 전환: 키보드 방향키로 이전/다음 사진 이동

### 3. 트랜지션 효과
- 페이드 인/아웃 (기본값)
- 슬라이드 (좌에서 우)
- 없음 (즉시 전환)
- 트랜지션 효과 선택 가능

### 4. 시계 표시 (옵션)
- 현재 시각을 화면에 오버레이로 표시
- ON/OFF 토글
- 표시 위치 선택: 좌상단, 우상단, 좌하단, 우하단, 중앙 하단
- 24시간 형식

### 5. 사진 정보 표시 (옵션)
- 파일명 표시 ON/OFF
- 촬영 날짜 표시 ON/OFF (EXIF 데이터에서 추출)
- 표시 위치: 화면 하단 오버레이

### 6. 설정 관리
- 모든 설정은 앱 종료 후에도 유지되어야 함
- 설정 화면에서 모든 옵션 조정 가능
- 마지막으로 사용한 폴더 경로 기억

## 사용자 시나리오

### 시나리오 1: 첫 실행
1. 사용자가 앱을 처음 실행합니다
2. 홈 화면에서 "폴더 선택" 버튼을 클릭합니다
3. 파일 탐색기에서 NAS 마운트 폴더(예: Z:\Photos)를 선택합니다
4. 앱이 해당 폴더와 모든 하위 폴더(Z:\Photos\2023, Z:\Photos\2024\여행 등)를 스캔합니다
5. 스캔 완료 후 "총 3,456장의 사진을 찾았습니다" 메시지 표시
6. "슬라이드쇼 시작" 버튼을 클릭하면 전체화면으로 슬라이드쇼가 시작됩니다

### 시나리오 2: 슬라이드쇼 감상 중
1. 슬라이드쇼가 설정된 간격으로 자동 재생됩니다
2. 사용자가 마우스를 움직이면 컨트롤 오버레이가 나타납니다
3. Space 키를 누르면 일시정지/재생이 토글됩니다
4. 방향키로 수동으로 사진을 넘길 수 있습니다
5. ESC 키를 누르면 홈 화면으로 돌아갑니다

### 시나리오 3: 설정 변경
1. 홈 화면에서 설정 아이콘을 클릭합니다
2. 전환 간격을 10초로 변경합니다
3. 시계 표시를 ON으로 하고 우하단에 위치시킵니다
4. 트랜지션 효과를 "페이드"로 선택합니다
5. 설정을 저장하고 나가면 다음 슬라이드쇼에 적용됩니다

## UI/UX 요구사항

### 홈 화면
- 앱 이름: "PhotoFlow"
- 선택된 폴더 경로 표시 (선택 안됨일 경우 "폴더를 선택하세요" 메시지)
- 스캔된 이미지 개수 표시 (예: "3,456장의 사진 (하위 폴더 42개 포함)")
- "폴더 선택" 버튼
- "슬라이드쇼 시작" 버튼 (폴더 선택 후에만 활성화)
- 설정 아이콘 (우상단)
- 다크 테마 기본 적용

### 슬라이드쇼 화면
- 전체화면으로 이미지 표시
- 이미지 맞춤: Contain 모드 (비율 유지, letterbox)
- 배경색: 검정
- 마우스 움직임 또는 아무 키 입력 시 컨트롤 오버레이 표시 (3초 후 자동 숨김)
- 컨트롤 오버레이: 이전(◀), 일시정지/재생(⏸/▶), 다음(▶), 나가기(✕) 버튼
- 시계 오버레이 (설정 시)
- 사진 정보 오버레이 (설정 시)

### 설정 화면
- 전환 간격 드롭다운
- 재생 순서 (순차/랜덤) 스위치
- 트랜지션 효과 드롭다운
- 서브폴더 포함 여부 스위치
- 시계 표시 섹션 (ON/OFF 스위치, 위치 드롭다운)
- 사진 정보 표시 섹션 (파일명 ON/OFF, 촬영일 ON/OFF)

## 키보드 단축키

| 키 | 동작 |
|----|------|
| Space | 일시정지/재생 토글 |
| ← | 이전 사진 |
| → | 다음 사진 |
| ESC | 슬라이드쇼 종료 (홈으로) |
| F | 전체화면 토글 |

## 비기능 요구사항
- 이미지 로드 시 로딩 인디케이터 표시
- 대용량 이미지 최적화 (메모리 효율적 로드)
- 부드러운 트랜지션 (60fps 목표)
- 창 최소 크기: 800x600
- 앱 아이콘 포함
```

---

## 사용 방법

### 1. spec-kit 설치

```bash
uv tool install specify-cli --from git+https://github.com/github/spec-kit.git
```

### 2. 프로젝트 초기화

```bash
specify init nas-slideshow --ai claude
cd nas-slideshow
```

### 3. Claude Code에서 순서대로 실행

**Step 1 - 스펙 정의:**

```
/speckit.specify [위 프롬프트 내용 붙여넣기]
```

**Step 2 - 기술 계획:**

```
/speckit.plan

Flutter 3.x를 사용합니다.
상태관리는 Riverpod을 사용합니다.
로컬 설정 저장은 shared_preferences를 사용합니다.
데스크톱 창 관리는 window_manager 패키지를 사용합니다.
파일 선택은 file_picker 패키지를 사용합니다.
EXIF 파싱은 exif 패키지를 사용합니다.
타겟 플랫폼은 Windows와 macOS입니다.
```

**Step 3 - 태스크 생성:**

```
/speckit.tasks
```

**Step 4 - 구현:**

```
/speckit.implement
```

---

## 기술 스택 요약

| 구분        | 기술               |
| ----------- | ------------------ |
| 프레임워크  | Flutter 3.x        |
| 언어        | Dart               |
| 상태관리    | Riverpod           |
| 로컬 저장   | shared_preferences |
| 파일 선택   | file_picker        |
| 창 관리     | window_manager     |
| EXIF 파싱   | exif               |
| 타겟 플랫폼 | Windows, macOS     |

---

## 향후 계획 (2차 개발)

-   Android 지원 추가
-   WebDAV 또는 Synology Photos API를 통한 NAS 접근
-   켄 번즈 효과 (줌/패닝 애니메이션)
-   다중 모니터 지원
